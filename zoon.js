let zdata,z={set:{script(t){const e=document.createElement("script");e.src=t,document.head.append(e)},css(t){const e=document.createElement("link");e.href=t,e.rel="stylesheet",document.head.append(e)},json(t){fetch(t+".json").then(t=>t.json()).then(t=>zdata=t).catch(console.error)},design(){const t=$q("body");null!=zdata.design&&(t.classList.add("use-layout"),t.classList.add(""+zdata.design))},title(){void 0!==zdata.pageName&&(document.title=`${zdata.pageName} - ${zdata.siteName}`,zoon.log("Title set"))},layout(t){let e,n=zdata.layout,s=$q("body");void 0===n?(e="default",fetch(t+"default.html").catch(t=>{zoon.log("Error fetching layout")}).then(t=>t.text()).then(t=>{s.insertAdjacentHTML("beforeend",t)}),zoon.log("Layout = default")):(e=n,fetch(t+n+".html").catch(t=>{zoon.log("Error fetching layout")}).then(t=>t.text()).then(t=>{s.insertAdjacentHTML("beforeend",t)}),zoon.log("Layout = "+n))}},pull_json(t){let e;return fetch(t).then(t=>t.json()).then(t=>e=t).catch(console.error),zoon.log(e),e},pageBuild(){z.set.title(),"0"!==zdata.layout&&z.set.layout("/assets/html/layouts/")},update(t,e){let n=$q("#pageSelect").value;$q(t).setAttribute("src",e+n)},loadPage(t){$q("z-html").setAttribute("src",t)}},zoon={log(t,e,n){const s=`color:${e};font-size:15px;`,o=`%c[zoon] %c[${t}] %c%s`;console.log(o,"color:#ab4cef;font-size:15px;",s,"color:#888;font-size:15px;",n)}};const $q=document.querySelector.bind(document),$qa=(t,e=document)=>Array.from(e.querySelectorAll(t));class ZoonData extends HTMLElement{connectedCallback(){let t=this.innerHTML;t=t.replace(/(\n)+/g,'", "').replace(/( = )+/g,'":"').slice(0,-3).slice(2),t=`{${t}}`;let e=JSON.parse(t);Object.assign(zdata,e),console.log(e),this.remove()}}class ZoonFrame extends HTMLElement{constructor(){super(),this.setup()}setup(){this.hasAttribute("frame")||this.setAttribute("frame","default"),this.hasAttribute("src")||this.setAttribute("src","/frames/")}render(){let t,e;e=$q("body"),this.frame=this.getAttribute("frame"),t=void 0,fetch(this.getAttribute("src")+this.getAttribute("frame")+".html").catch(t=>{zoon.log("Error fetching layout")}).then(t=>t.text()).then(t=>{this.text=t,e.insertAdjacentHTML("beforeend",this.text)}),zoon.log("z-frame","#de922f","Frame set to "+this.frame)}connectedCallback(){this.rendered||(this.render(),this.rendered=!0)}static get observedAttributes(){return["src","frame"]}}class ZoonHTML extends HTMLElement{connectedCallback(){this.setFromSource()}setFromSource(){fetch(this.getAttribute("src")).then(t=>t.text()).then(t=>{this.innerHTML=t})}attributeChangedCallback(t,e,n){this.hasAttribute("src")?this.setFromSource():this.hasAttribute("key")&&this.setFromURL()}static get observedAttributes(){return["src"]}}class ZoonTitle extends HTMLElement{run(){let t=this.getAttribute("title");document.title=t,zoon.log("z-title","#2f84de","title set as "+t)}connectedCallback(){this.run()}}class ZoonTime extends HTMLElement{render(){let t=new Date(this.getAttribute("datetime")||Date.now());this.innerHTML=new Intl.DateTimeFormat("default",{year:this.getAttribute("year")||void 0,month:this.getAttribute("month")||void 0,day:this.getAttribute("day")||void 0,hour:this.getAttribute("hour")||void 0,minute:this.getAttribute("minute")||void 0,second:this.getAttribute("second")||void 0,timeZoneName:this.getAttribute("time-zone-name")||void 0}).format(t)}connectedCallback(){this.rendered||(this.render(),this.rendered=!0)}static get observedAttributes(){return["datetime","year","month","day","hour","minute","second","time-zone-name"]}attributeChangedCallback(t,e,n){this.render()}}class ZoonClock extends HTMLElement{render(){this.innerHTML='\n    <z-time hour="numeric" minute="numeric" second="numeric">\n    </z-time>\n    ',this.timerElem=this.firstElementChild}connectedCallback(){this.rendered||(this.render(),this.rendered=!0),this.timer=setInterval(()=>this.update(),1e3)}update(){this.date=new Date,this.timerElem.setAttribute("datetime",this.date),this.dispatchEvent(new CustomEvent("tick",{detail:this.date}))}disconnectedCallback(){clearInterval(this.timer)}}class ZoonVariable extends HTMLElement{render(){this.getAttribute("object");this.innerHTML=zdata[this.getAttribute("var")]||""}connectedCallback(){this.rendered||(this.render(),this.rendered=!0)}}class ZoonNavbar extends HTMLElement{connectedCallback(){this.setCurrentPage()}setCurrentPage(){let t=location.pathname;if("/"===t)return;let e=this.getElementsByTagName("a");for(let n=0,s=e.length;n<s;n++)-1!==e[n].getAttribute("href").indexOf(t)&&(e[n].className="current-page")}setupLinks(){let t=this.getElementsByTagName("a");for(let e=0,n=t.length;e<n;e++)-1!==t[e].getAttribute("href").indexOf(current_location)&&(t[e].className="current-page")}}class ZoonLogo extends HTMLElement{connectedCallback(){this.innerHTML='<a href="https://zoon.vuw.nu">zoon</a>'}}class ZoonHTMLQuery extends HTMLElement{connectedCallback(){const t=new URLSearchParams(window.location.search),e=this.getAttribute("src"),n=this.getAttribute("key"),s=(window.location.pathname,t.get(n));null!==s&&fetch(e+s).then(t=>t.text()).then(t=>{this.innerHTML=t})}}class ZoonHTMLPath extends HTMLElement{render(){}connectedCallback(){const t=new URLSearchParams(window.location.search),e=this.getAttribute("src"),n=this.getAttribute("key"),s=(window.location.pathname,t.get(n));null!==s&&fetch(e+s).then(t=>t.text()).then(t=>{this.innerHTML=t})}}class ZoonInsert extends HTMLElement{connectedCallback(){const t=$q("z-insert"),e=$q(this.getAttribute("input"));for(;e.childNodes.length>0;)t.appendChild(e.childNodes[0]);e.remove()}}class ZoonTable extends HTMLElement{connectedCallback(){let t=this.getAttribute("src");fetch(t).then(t=>t.text()).then(t=>{this.innerHTML=t})}}class ZoonTemplate extends HTMLElement{connectedCallback(){let t=$q("#"+this.getAttribute("src"));this.attachShadow({mode:"open"}).append(t.content.cloneNode(!0))}}class ZoonCards extends HTMLElement{connectedCallback(){let t=$q("#"+this.getAttribute("tmpl"));this.attachShadow({mode:"open"}).append(t.content.cloneNode(!0));let e=this.getAttribute("json");fetch(e).then(t=>t.json()).then(t=>window[this.getAttribute("name")]=t).catch(console.error)}}class ZoonLightswitch extends HTMLElement{connectedCallback(){this.getAttribute("on"),this.getAttribute("off");this.init(),this.addEventListener("click",(function(){this.toggle()}),!1)}init(){const t=$q("#"+this.getAttribute("target"));window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("lightswitch-off"):t.classList.add("lightswitch-on")}toggle(){$q("#"+this.getAttribute("target")).classList.contains("lightswitch-off")?this.turnOn():this.turnOff()}turnOn(){target.classList.replace("lightswitch-off","lightswitch-on")}turnOff(){target.classList.replace("lightswitch-on","lightswitch-off")}}class ZoonObject extends HTMLElement{connectedCallback(){this.setupObject()}setupObject(){let t=this.getAttribute("src");fetch(t).then(t=>t.json()).then(t=>window[this.getAttribute("name")]=t).catch(console.error)}}class ZoonButton extends HTMLElement{render(){}connectedCallback(){this.rendered||(this.render(),this.rendered=!0)}}function defineElements(){customElements.define("z-title",ZoonTitle),customElements.define("z-data",ZoonData),customElements.define("z-object",ZoonObject),customElements.define("z-time",ZoonTime),customElements.define("z-clock",ZoonClock),customElements.define("z-nav",ZoonNavbar),customElements.define("zoon-logo",ZoonLogo),customElements.define("z-insert",ZoonInsert),customElements.define("z-frame",ZoonFrame),customElements.define("z-html",ZoonHTML),customElements.define("z-html-query",ZoonHTMLQuery),customElements.define("z-html-path",ZoonHTMLPath),customElements.define("z-template",ZoonTemplate),customElements.define("z-cards",ZoonCards),customElements.define("z-lightswitch",ZoonLightswitch),setTimeout(()=>{customElements.define("z-var",ZoonVariable)},100)}!function(t){if(t.search){var e={};t.search.slice(1).split("&").forEach((function(t){var n=t.split("=");e[n[0]]=n.slice(1).join("=").replace(/~and~/g,"&")})),void 0!==e.p&&window.history.replaceState(null,null,t.pathname.slice(0,-1)+(e.p||"")+(e.q?"?"+e.q:"")+t.hash)}}(window.location),z.set.css("https://cdn.jsdelivr.net/gh/vuwnu/zoon@master/zoon.css"),fetch("/zdata.json").then(t=>t.json()).then(t=>zdata=t).catch(console.error),window.addEventListener("load",t=>{setTimeout(()=>{defineElements(),z.pageBuild()},100)});
